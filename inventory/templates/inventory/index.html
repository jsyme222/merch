{% extends 'base/base-site.html' %}
{% load static %}

{% block body_class %}product_page{% endblock %}
{% block styles %}
    <link href="{% static 'main/assets/plugins/jquery-datatable/css/jquery.dataTables.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'main/assets/plugins/datatables-responsive/css/datatables.responsive.css' %}" rel="stylesheet" type="text/css" media="screen" />
  {% endblock %}

{% block content %}
      <!-- BEGIN PAGE CONTAINER-->
      <div class="page-content">
        <div class="content" style="background-color:{{ group_details.color }};">
          <!-- BEGIN PAGE TITLE -->
          <div class="page-title">
            <h3><span class="semi-bold">{{ group_details.title }}</span> Inventory</h3>
          </div>
<div class="row-fluid">
            <div class="span12">
              <div class="grid simple ">
                <div class="grid-title">
                  <div class="inventory-selectors">
                  <a href="{% url 'inventory.index' %}"><button class="btn btn-primary">All Inventory</button></a>

                  <a  href="{% url 'inventory.index' 'selling-inventory' %}"><button class="btn btn-success">For Sale</button></a>

                  <a  href="{% url 'inventory.index' 'vender' %}"><button class="btn btn-warning">Vender</button></a>

                  <a  href="{% url 'inventory.index' 'seller' %}"><button class="btn btn-info">Seller</button></a>

                  </div>
                </div>
                <div id="table-container" class="grid-body ">
                    {% block table %}
                  <table class="table table-hover table-condensed">
                    <thead>
                      <tr>
                        <th style="width:1%">#</th>
                        <th style="width:1%;{% if is_selling %}display:none;{% endif %}">Selling</th>
                        <th style="width:10%">Product</th>
                        <th style="width:5%">SKU</th>
                        <th style="width:6%" class="hide-sm">Wholesale</th>
                        <th style="width:1%" {% if products_selling %}class="hide-sm"{% endif %}>Inventory</th>
                        <th style="width:6%" class="hide-sm">Added On</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% if products %}

                      {% for product in products %}

                      <tr class="table-overlay-{% cycle 'light' 'dark' %}">
                        <div >
                        <td class="v-align-middle">
                          <span style="color:{{ class_info.color }}">{{ product.pk }}</span>
                        </td>

                        <td{% if is_selling %}style="display:none;"{% endif %}>

                          <input type="checkbox" style="width:20px;{% if is_selling %}display:none;{% endif %}" disabled {% if product.on_floor >= 1 %}checked{% endif %}></input>

                        </td>

                        <td class="v-align-middle">
                          <a href="
                          {% if product.class_name == 'vender' %}
                            {% url 'vender_product.detail' product.pk %}
                          {% else %}
                            {% url 'seller_product.detail' product.pk %}
                          {% endif %}" style="width:10%"
                           >
                            {{ product.title }}
                          </a>
                        </td>

                        <td class="v-align-middle">
                          <span class="muted">{{ product.SKU }}</span>
                        </td>

                        <td class="hide-sm">
                          <span class="muted bold text-success">${{ product.wholesale }}</span>
                        </td>

                        <td {% if products_selling %}class="hide-sm"{% endif %}>
                          {% if product.class_name != 'seller' %}
                          <input  id="qty{{ product.pk }}" type="number" value="{{ product.QTY }}" style="width:50px;" min="{{ product.on_floor }}" onchange="update_object_val({{ product.pk }}, this.value, {{ product.QTY }}, 'qty')"></input>
                          <br>
                          <button id="qty-btn-{{ product.pk }}" class="btn btn-xs btn-mini btn-primary hidden-button" type="button" value="{{ product.pk }}" onclick="update_qty(this.value)">UPDATE</button>
                          {% else %}
                          <span class="muted">{{ product.QTY }}</span>
                          {% endif %}
                        </td>
                        <td class="hide-sm">
                          <span class="muted bold text-success">{{ product.created_on|date:"m/d/y" }}</span>
                        </td>
                      </tr>
                      {% endfor %}

                      {% endif %}

                    </tbody>
                  </table>
                  {% endblock %}
{% if products.has_other_pages %}
  <ul class="pagination">
    {% if products.has_previous %}
      <li><a href="?page={{ products.previous_page_number }}">&laquo;</a></li>
    {% else %}
      <li class="disabled"><span>&laquo;</span></li>
    {% endif %}
    {% for i in products.paginator.page_range %}
      {% if products.number == i %}
        <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
      {% else %}
        <li><a href="?page={{ i }}">{{ i }}</a></li>
      {% endif %}
    {% endfor %}
    {% if products.has_next %}
      <li><a href="?page={{ products.next_page_number }}">&raquo;</a></li>
    {% else %}
      <li class="disabled"><span>&raquo;</span></li>
    {% endif %}
  </ul>
{% endif %}
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
{% endblock %}

{% block page_scripts %}

    <script src="{% static 'main/assets/plugins/bootstrap-select2/select2.min.js' %}" type="text/javascript"></script>

    <script src="{% static 'main/assets/plugins/jquery-datatable/js/jquery.dataTables.min.js' %}" type="text/javascript"></script>

    <script src="{% static 'main/assets/plugins/jquery-datatable/extra/js/dataTables.tableTools.min.js' %}" type="text/javascript"></script>

    <script type="text/javascript" src="{% static 'main/assets/plugins/datatables-responsive/js/datatables.responsive.js' %}"></script>

    <script type="text/javascript" src="{% static 'main/assets/plugins/datatables-responsive/js/lodash.min.js' %}"></script>

    <script src="{% static 'main/assets/plugins/jquery-numberAnimate/jquery.animateNumbers.js' %}" type="text/javascript"></script>
    <script src="{% static 'main/assets/js/datatables.js' %}" type="text/javascript"></script>
    <script type="text/javascript" src="{% static 'main/assets/js/tables.js' %}"></script>
<script src="{% static 'products/js/products.js' %}"></script>
{% endblock %}